Réseaux : le routage statique IP




               Julien Mangeard
               Antoine Millet

Sommaire

 Le modèle OSI
 Le protocole IP
 Le routage IP

Le modèle OSI - description

 OSI ou Open Systems Interconnection
 Objectif : fournir un modèle pour chaque
  architecture réseau en 7 couches.

Le modèle OSI - communication

 Communication entre les couches du modèle

Le modèle OSI ­ Couche physique

 La couche physique fournit les moyens
  mécaniques, électriques, fonctionnels et
  procéduraux nécessaires à l'activation, au
  maintien et à la désactivation des
  connexions physiques destinées à la
  transmission de bits entre deux entités de
  liaison de données.
 Les cartes réseaux, les câbles coaxial, paire
  torsadpe, USB, Bluetooth...

Le modèle OSI ­ Liaison de données


 La couche liaison données définit
  l'interface avec la carte réseau et le partage
  du média de transmission.
 Ethernet, Token ring, PPP, Wi-Fi...

Le modèle OSI ­ la couche réseau

 La couche reseau permet de gérer
  l'adressage et le routage des données, c'est-
  à-dire leur acheminement via le réseau.
 IPv4, IPv6, ARP, RARP, NetBEUI...

Le modèle OSI ­ la couche transport


 La couche transport est chargée du
  transport des données, de leur découpage
  en paquets et de la gestion des éventuelles
  erreurs de transmission.
 TCP, UDP, RTP...

Le modèle OSI ­ la couche session


 La couche session définit l'ouverture et la
  destruction des sessions de communication
  entre les machines du réseau.
 RTSP, AppleTalk, telnet ...

Le modèle OSI ­ la couche
présentation


 La couche présentation définit le format
  des données manipulées par le niveau
  applicatif (leur représentation,
  éventuellement leur compression et leur
  chiffrement) indépendamment du système.
 ASCII, MIME, Unicode ...

Le modèle OSI ­ La couche application


 La couche application assure l'interface
  avec les applications. Il s'agit donc du niveau
  le plus proche des utilisateurs, géré
  directement par les logiciels.
 HTTP, POP3, SIP, FTP, VoIP, SSH, ...

L'adressage IP

 Définies sur 4 octets (32 bits)
   ­ exemple en notation pointée : 192.168.0.1
   ­ exemple en notation hexadécimale : 0xC0A80001
 Elles sont lipes à un point d'accqs rpseau et
  non a un hôte.
 Un hôte peut être sur plusieurs réseaux.
 Chaque point d'accqs rpseau doit avoir une
  IP unique sur son réseau.

Anatomie d'une adresse IP

 Une adresse IP est composée de 2 parties :
  ­ Le host id :
      assignp par l'administrateur rpseau
      Il identifie un hôte de manière unique sur un réseau

  ­ Le net id
      assigné par une autorité
      Il identifie le réseau

 Le dpcoupage d'une IP dppend de sa classe

Classes d'adresses IP

 Il existe 5 classes d'adresses IP puliques

La classe A

 8 bits pour le net id
  ­ de 0.0.0.0 à 127.0.0.0

 24 bits pour le host id
  ­ 2^24 - 2 adresses possibles (16 777 214)

 Pas de classe A en France
  ­ Exemple : 18.0.0.0 MIT

 Attribution par le NIC (Network Information Center)

La classe B

 16 bits pour le net id
  ­ de 128.0.0.0 à 191.255.0.0

 16 bits pour le host id
  ­ 2^16 - 2 adresses possibles (65 534)

 Exemple :
  ­ 163.5.0.0 (EPITECH)

 Attribution par le NIC (Network Information Center)

La classe C

 24 bits pour le net id
  ­ de 192.0.0 à 223.255.255.255

 8 bits pour le host id
  ­ 254 adresses possibles

 Attribution par le NIC (Network Information Center)

La classe D

 Adresses multicast
  ­ Transmissions point à multipoint
  ­ Surtout utiliser pour streamer (exemple freebox)

 Adresse comprises entre 224.0.0.0 et 239.255.255.255
 Utilisation spéciale
 Pas d'organisation gprant leur attribution

La classe E et les adresses
particulières


 La classe E
  ­ De 240.0.0.0 à 254.255.255.255
  ­ Réservé pour utilisation dans la futur
 Les adresses particulières
  ­ 127.0.0.1 loopback ou localhost
  ­ 0.0.0.0 l'hôte ne connaît pas son IP sur le rpseau

Adresses particulières

 Adresse de réseau
  ­ Tous les bits de la partie host id sont à 0.
  ­ Exemple : 163.5.0.0 adresse du réseau de classe
    B en 163.5 (EPITECH)
 Adresse de broadcast
  ­ Adresse servant à contacter toutes les machines
    d'un rpseau
  ­ Tous les bits de la partie host id sont à 1.
  ­ Exemple : ping 10.42.255.255

Notion de sous-reseau IP

 But : découper un réseau en plusieurs réseaux de plus
  petite taille.
 Les sous-résaux sont aussi appelés subnet.
 Facilite la structuration des réseaux.
 Adresse de sous réseaux prise sur la partie host id.
 L'administrateur est chargp de crper ses sous-réseaux.
 Longueur des subnets en bits et variables en fonction de
  la taille des sous-réseaux désirés.

Les masques de sous-reseaux

 Masques de sous-reseaux ou netmask
 Nécessaires pour connaître quelle est la partie
  subnet id et la partie host id.
 Nécessaire savoir sur quel sous réseau se trouve un
  hôte.
 Formp de la mrme maniqre qu'une IP.
  ­ Les 1 représente la partie net id.
  ­ Les 0 représente la partie host id
 Exemple :
  ­ netmask par dpfaut d'une IP de classe B sans sous rpseau
    255.255.0.0 (hexadécimal 0xffff0000)
  ­ Netmask par dpfaut d'une IP de classe C sans sous rpseau
    255.255.255.0 (hexadécimal 0xffffff00)

Exemple de découpage en sous-
réseaux

 254 sous réseau possible pour un réseau de classe A
  avec un netmask de 255.255.0.0

                                                    10.0.0.0 ­ 255.0.0.0




                                    10.42.0.0 ­ 255.255.0.0




                          10.245.0.0 ­ 255.255.0.0




                                   10.247.0.0 ­ 255.255.0.0

Rôle de l'IP

 Transport de datagramme IP
  ­ Paquets de données

 Mode non connecté
  ­ Route non pré-établie
  ­ Paquets routés indépendaments
  ­ Tous les paquets ne suivent pas forcément la même route

 N'assure pas la livraison
 A lire : RFC 1149 transmission des paquets IP sur
  pigeons voyageurs 

Datagramme IP



HEADER




DATA

Fragmentation des datagrammes IP


 Un datagramme IP peut faire jusqu'à 65 534 octet.
 Un datagramme IP ne peut pas forcement être transmis en un
morceau.
Les routeurs ont la charge de découper les datagrammes IP pour se
conformer aux contraintes des réseaux sur lesquels ils circulent.
Le MTU (Maximum Transfert Unit) dptermine la taille maximum d'un
datagramme
 MTU d'ethernet : 1500
Aucune garantie que les paquet arrive dans la bon ordre.

Les routeurs

 Équipement réseaux permettant de relier des
  réseaux entre eux.
 Décrémente les TTL des header IP.
 Ils possède une table de routage.

Table de routage IP

 La table de routage est une table de
  correspondance entre l'adresse du sous-
  reseau et le noeud suivant auquel le routeur
  doit délivrer le message.

Exemple de table de routage




Les flags :
U - La route est en service.
G - La route est un routeur (gateway).
H - La route est un ordinateur (host)
D - La route a été créée par une redirection.
M - La route a été modifiée par une redirection.

Routage IP statique

 Lorsqu'un hôte A veut envoyer un paquet à
  un hôte B :
  ­ A regarde si il a une interface dans le même
    réseau ou sous-reseau que B.
      Si oui : A envoie le paquet directement à B
      Si non : A regarde dans sa table de routage si il connaît
       une route pour aller à B.
         ­ Si oui A envoie le paquet à l'hôte indiqup dans la route
         ­ Si non A envoie le paquet à sa passerelle par défaut.

Problématiques de routage

 Les boucles
 Les adresses IP privées non routées sur
  Internet :
   ­ Classe A : 10.0.0.1 à 10.255.255.254
   ­ Classes B : 172.16.0.1 à 172.31.255.254
   ­ Classes C : 192.168.0.1 à 192.168.255.254

Calculs relatifs au CIDR

 CIDR : Classless Inter-Domain Routing
  ­ IP de la forme : 192.168.0.0/24

 Pour passer de la forme CIDR à la notation
  classique il faut passer en représentation binaire.
  ­ /24 => 11111111 11111111 11111111 00000000

  ­   =>      255         255      255     0
 Exercice convertir 172.16.4.2/30 en notation
  classique.

Autres calculs relatif à des adresses IP


 Trouver l'adresse d'un rpseau
 Trouver une adresse de broadcast
 Être capable de déterminer si deux machines
  peuvent se parler.

ARP

 Trouver une MAC à partir d'une IP.
 Mécanisme de broadcast sur Ethernet.
 Maintient une table de correspondance entre
  IP et ARP.
   ­ arp -a

 RARP même principe que ARP mais pour
  trouver une adresse IP.

ICMP

 Internet Control Message Protocol
 Implémenté sur presque tous les
  équipements réseau.
 Message envoyé :
   ­ En cas de problème sur un datagramme
   ­ Pour modifier un comportement

UDP

 Service de connexion sans garantie
 Ne gère pas de mode connecté
 Pas de rppmission en cas d'erreur
 Délivre un datagramme à un service

TCP

 Transport
  ­ De bout en bout entre application
  ­ Gère le mode connecté
  ­ Sans erreur
  ­ Sans perte
  ­ Ordonné
  ­ Systqme d'acquittement
  ­ Avec contrôle de flux
  ­ Indication du service par numéro de port

FIN

 Merci de votre attention.
 Bon courage pour votre prochain test.

